<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>About | Galaxium</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        font-family: 'Space Grotesk', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      }
      body {
        margin: 0;
        min-height: 100vh;
        display: grid;
        place-items: center;
        background: #0b0b12;
        color: #f5f5f7;
        padding: 1.5rem;
      }
      main {
        max-width: 720px;
      }
      p,
      li {
        color: #d5d5dd;
        line-height: 1.6;
      }
      .updated {
        margin-top: 1.5rem;
        font-size: 0.95rem;
        color: #9ca3af;
      }
      .error {
        color: #fda4af;
      }
    </style>
  </head>
  <body>
    <main>
      <h1 id="title">Loading...</h1>
      <p id="summary"></p>
      <ul id="content"></ul>
      <p class="updated" id="updated"></p>
      <p class="error" id="error" hidden>Unable to load policy content.</p>
    </main>

    <script>
      const pageKey = 'about';

      async function loadDocument() {
        try {
          const response = await fetch('/content/legal-pages.json');
          const data = await response.json();
          const docData = data.documents?.[pageKey];

          if (!docData) {
            throw new Error(`Missing document for key: ${pageKey}`);
          }

          document.getElementById('title').textContent = docData.title;
          document.getElementById('summary').textContent = docData.summary;

          const list = document.getElementById('content');
          list.innerHTML = '';
          docData.content.forEach((item) => {
            const li = document.createElement('li');
            li.textContent = item;
            list.appendChild(li);
          });

          document.getElementById('updated').textContent = `Last updated: ${docData.lastUpdated} (all docs: ${data.globalLastUpdated})`;
        } catch (error) {
          document.getElementById('error').hidden = false;
          document.getElementById('summary').textContent = '';
          document.getElementById('content').innerHTML = '';
          document.getElementById('updated').textContent = '';
          console.error(error);
        }
      }

      loadDocument();
    </script>
  </body>
</html>
